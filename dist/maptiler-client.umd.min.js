(function(p,E){typeof exports=="object"&&typeof module<"u"?E(exports):typeof define=="function"&&define.amd?define(["exports"],E):(p=typeof globalThis<"u"?globalThis:p||self,E(p.maptilerclient={}))})(this,function(p){"use strict";function E(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class C{constructor(){this._apiKey="Not defined yet.",this._fetch=E()}set apiKey(n){this._apiKey=n}get apiKey(){return this._apiKey}set fetch(n){this._fetch=n}get fetch(){return this._fetch}}const f=new C;var P=(t=>(t.LATIN="latin",t.NON_LATIN="nonlatin",t.LOCAL="",t.AFAR="aa",t.ABKHAZIAN="ab",t.AVESTAN="ae",t.AFRIKAANS="af",t.AKAN="ak",t.AMHARIC="am",t.ARAGONESE="an",t.ARABIC="ar",t.ASSAMESE="as",t.AVARIC="av",t.AYMARA="ay",t.AZERBAIJANI="az",t.BASHKIR="ba",t.BELARUSIAN="be",t.BULGARIAN="bg",t.BIHARI="bh",t.BISLAMA="bi",t.BAMBARA="bm",t.BENGALI="bn",t.TIBETAN="bo",t.BRETON="br",t.BOSNIAN="bs",t.CATALAN="ca",t.CHECHEN="ce",t.CHAMORRO="ch",t.CORSICAN="co",t.CREE="cr",t.CZECH="cs",t.CHURCH_SLAVIC="cu",t.CHUVASH="cv",t.WELSH="cy",t.DANISH="da",t.GERMAN="de",t.MALDIVIAN="dv",t.DZONGKHA="dz",t.EWE="ee",t.GREEK="el",t.ENGLISH="en",t.ESPERANTO="eo",t.SPANISH="es",t.ESTONIAN="et",t.BASQUE="eu",t.PERSIAN="fa",t.FULAH="ff",t.FINNISH="fi",t.FIJIAN="fj",t.FAROESE="fo",t.FRENCH="fr",t.WESTERN_FRISIAN="fy",t.IRISH="ga",t.GAELIC="gd",t.GALICIAN="gl",t.GUARANI="gn",t.GUJARATI="gu",t.MANX="gv",t.HAUSA="ha",t.HEBREW="he",t.HINDI="hi",t.HIRI_MOTU="ho",t.CROATIAN="hr",t.HAITIAN="ht",t.HUNGARIAN="hu",t.ARMENIAN="hy",t.HERERO="hz",t.INTERLINGUA="ia",t.INDONESIAN="id",t.INTERLINGUE="ie",t.IGBO="ig",t.SICHUAN_YI="ii",t.INUPIAQ="ik",t.IDO="io",t.ICELANDIC="is",t.ITALIAN="it",t.INUKTITUT="iu",t.JAPANESE="ja",t.JAVANESE="jv",t.GEORGIAN="ka",t.KONGO="kg",t.KIKUYU="ki",t.KUANYAMA="kj",t.KAZAKH="kk",t.KALAALLISUT="kl",t.CENTRAL_KHMER="km",t.KANNADA="kn",t.KOREAN="ko",t.KANURI="kr",t.KASHMIRI="ks",t.KURDISH="ku",t.KOMI="kv",t.CORNISH="kw",t.KIRGHIZ="ky",t.LUXEMBOURGISH="lb",t.GANDA="lg",t.LIMBURGAN="li",t.LINGALA="ln",t.LAO="lo",t.LITHUANIAN="lt",t.LUBA_KATANGA="lu",t.LATVIAN="lv",t.MALAGASY="mg",t.MARSHALLESE="mh",t.MAORI="mi",t.MACEDONIAN="mk",t.MALAYALAM="ml",t.MONGOLIAN="mn",t.MARATHI="mr",t.MALAY="ms",t.MALTESE="mt",t.BURMESE="my",t.NAURU="na",t.NORWEGIAN="no",t.NORTH_NDEBELE="nd",t.NEPALI="ne",t.NDONGA="ng",t.DUTCH="nl",t.SOUTH_NDEBELE="nr",t.NAVAJO="nv",t.CHICHEWA="ny",t.OCCITAN="oc",t.OJIBWA="oj",t.OROMO="om",t.ORIYA="or",t.OSSETIC="os",t.PANJABI="pa",t.PALI="pi",t.POLISH="pl",t.PUSHTO="ps",t.PORTUGUESE="pt",t.QUECHUA="qu",t.ROMANSH="rm",t.RUNDI="rn",t.ROMANIAN="ro",t.RUSSIAN="ru",t.KINYARWANDA="rw",t.SANSKRIT="sa",t.SARDINIAN="sc",t.SINDHI="sd",t.NORTHERN_SAMI="se",t.SANGO="sg",t.SINHALA="si",t.SLOVAK="sk",t.SLOVENIAN="sl",t.SAMOAN="sm",t.SHONA="sn",t.SOMALI="so",t.ALBANIAN="sq",t.SERBIAN="sr",t.SWATI="ss",t.SOTHO_SOUTHERN="st",t.SUNDANESE="su",t.SWEDISH="sv",t.SWAHILI="sw",t.TAMIL="ta",t.TELUGU="te",t.TAJIK="tg",t.THAI="th",t.TIGRINYA="ti",t.TURKMEN="tk",t.TAGALOG="tl",t.TSWANA="tn",t.TONGA="to",t.TURKISH="tr",t.TSONGA="ts",t.TATAR="tt",t.TWI="tw",t.TAHITIAN="ty",t.UIGHUR="ug",t.UKRAINIAN="uk",t.URDU="ur",t.UZBEK="uz",t.VENDA="ve",t.VIETNAMESE="vi",t.VOLAPUK="vo",t.WALLOON="wa",t.WOLOF="wo",t.XHOSA="xh",t.YIDDISH="yi",t.YORUBA="yo",t.ZHUANG="za",t.CHINESE="zh",t.ZULU="zu",t))(P||{}),w=(t,n,e)=>new Promise((r,o)=>{var i=a=>{try{c(e.next(a))}catch(l){o(l)}},s=a=>{try{c(e.throw(a))}catch(l){o(l)}},c=a=>a.done?r(a.value):Promise.resolve(a.value).then(i,s);c((e=e.apply(t,n)).next())});function R(t){return w(this,arguments,function*(n,e={}){if(f.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");return f.fetch(n,e)})}const N={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(N);class d extends Error{constructor(n,e=""){super(`Call to enpoint ${n.url} failed with the status code ${n.status}. ${e}`),this.res=n}}var H=(t,n,e)=>new Promise((r,o)=>{var i=a=>{try{c(e.next(a))}catch(l){o(l)}},s=a=>{try{c(e.throw(a))}catch(l){o(l)}},c=a=>a.done?r(a.value):Promise.resolve(a.value).then(i,s);c((e=e.apply(t,n)).next())});const y={400:"Query too long / Invalid parameters",403:"Key is missing, invalid or restricted"};function v(t){return H(this,arguments,function*(n,e={}){const r=new URL(`geocoding/${encodeURIComponent(n)}.json`,N.maptilerApiURL);if(r.searchParams.set("key",f.apiKey),"bbox"in e&&r.searchParams.set("bbox",[e.bbox.southWest.lng,e.bbox.southWest.lat,e.bbox.northEast.lng,e.bbox.northEast.lat].join(",")),"proximity"in e&&r.searchParams.set("proximity",[e.proximity.lng,e.proximity.lat].join(",")),"language"in e){const s=(Array.isArray(e.language)?e.language:[e.language]).join(",");r.searchParams.set("language",s)}const o=r.toString(),i=yield R(o);if(!i.ok)throw new d(i,i.status in y?y[i.status]:"");return yield i.json()})}function K(t){return H(this,arguments,function*(n,e={}){const r=new URL(`geocoding/${n.lng},${n.lat}.json`,N.maptilerApiURL);if(r.searchParams.set("key",f.apiKey),"bbox"in e&&r.searchParams.set("bbox",[e.bbox.southWest.lng,e.bbox.southWest.lat,e.bbox.northEast.lng,e.bbox.northEast.lat].join(",")),"proximity"in e&&r.searchParams.set("proximity",[e.proximity.lng,e.proximity.lat].join(",")),"language"in e){const s=(Array.isArray(e.language)?e.language:[e.language]).join(",");r.searchParams.set("language",s)}const o=r.toString(),i=yield R(o);if(!i.ok)throw new d(i,i.status in y?y[i.status]:"");return yield i.json()})}const M={forward:v,reverse:K};var G=(t,n,e)=>new Promise((r,o)=>{var i=a=>{try{c(e.next(a))}catch(l){o(l)}},s=a=>{try{c(e.throw(a))}catch(l){o(l)}},c=a=>a.done?r(a.value):Promise.resolve(a.value).then(i,s);c((e=e.apply(t,n)).next())});const T={403:"Key is missing, invalid or restricted"};function D(){return G(this,null,function*(){const t=new URL("geolocation/ip.json",N.maptilerApiURL);t.searchParams.set("key",f.apiKey);const n=t.toString(),e=yield R(n);if(!e.ok)throw new d(e,e.status in T?T[e.status]:"");return yield e.json()})}const x={info:D};var b=(t,n,e)=>new Promise((r,o)=>{var i=a=>{try{c(e.next(a))}catch(l){o(l)}},s=a=>{try{c(e.throw(a))}catch(l){o(l)}},c=a=>a.done?r(a.value):Promise.resolve(a.value).then(i,s);c((e=e.apply(t,n)).next())});const L={403:"Key is missing, invalid or restricted"};function j(t){return b(this,arguments,function*(n,e={}){const r=new URL(`coordinates/search/${n}.json`,N.maptilerApiURL);r.searchParams.set("key",f.apiKey),"limit"in e&&r.searchParams.set("limit",e.limit.toString()),"transformations"in e&&r.searchParams.set("transformations",e.transformations.toString()),"exports"in e&&r.searchParams.set("exports",e.exports.toString());const o=r.toString(),i=yield R(o);if(!i.ok)throw new d(i,i.status in L?L[i.status]:"");return yield i.json()})}function B(t){return b(this,arguments,function*(n,e={}){const r=(Array.isArray(n)?n:[n]).map(c=>`${c.lng},${c.lat}`).join(";"),o=new URL(`coordinates/transform/${r}.json`,N.maptilerApiURL);o.searchParams.set("key",f.apiKey),"sourceCrs"in e&&o.searchParams.set("s_srs",e.sourceCrs.toString()),"targetCrs"in e&&o.searchParams.set("t_srs",e.targetCrs.toString()),"operations"in e&&o.searchParams.set("ops",(Array.isArray(e.operations)?e.operations:[e.operations]).join("|"));const i=o.toString(),s=yield R(i);if(!s.ok)throw new d(s,s.status in L?L[s.status]:"");return yield s.json()})}const W={search:j,transform:B};var _=(t,n,e)=>new Promise((r,o)=>{var i=a=>{try{c(e.next(a))}catch(l){o(l)}},s=a=>{try{c(e.throw(a))}catch(l){o(l)}},c=a=>a.done?r(a.value):Promise.resolve(a.value).then(i,s);c((e=e.apply(t,n)).next())});const A={403:"Key is missing, invalid or restricted"};function F(t){return _(this,null,function*(){const n=new URL(`data/${encodeURIComponent(t)}/features.json`,N.maptilerApiURL);n.searchParams.set("key",f.apiKey);const e=n.toString(),r=yield R(e);if(!r.ok)throw new d(r,r.status in A?A[r.status]:"");return yield r.json()})}const V={get:F};function Y(t,n,e){let r=n[0],o=n[1],i=e[0]-r,s=e[1]-o;if(i!==0||s!==0){const c=((t[0]-r)*i+(t[1]-o)*s)/(i*i+s*s);c>1?(r=e[0],o=e[1]):c>0&&(r+=i*c,o+=s*c)}return i=t[0]-r,s=t[1]-o,i*i+s*s}function U(t,n,e,r,o){let i=r,s;for(let c=n+1;c<e;c++){const a=Y(t[c],t[n],t[e]);a>i&&(s=c,i=a)}i>r&&(s-n>1&&U(t,n,s,r,o),o.push(t[s]),e-s>1&&U(t,s,e,r,o))}function J(t,n){const e=t.length-1,r=[t[0]];return U(t,0,e,n,r),r.push(t[e]),r}function Z(t,n){if(t.length<=2)return t;const e=n!==void 0?n*n:1;return J(t,e)}function k(t,n=!0){let e=`${t.lng},${t.lat}`;return t.color&&n&&(e+=`,${t.color}`),e}function $(t,n=3e3){let e=t.map(i=>i.join(",")).join("|"),r=5e-6;const o=1e-5;for(;e.length>n;)e=Z(t,r).map(i=>`${i[0]},${i[1]}`).join("|"),r+=o;return e}function z(t,n,e={}){var r,o,i,s,c;const a=(r=e.style)!=null?r:N.mapStyle,l=e.hiDPI?"@2x":"",S=(o=e.format)!=null?o:"png";let I=~~((i=e.width)!=null?i:1024),u=~~((s=e.height)!=null?s:1024);e.hiDPI&&(I=~~(I/2),u=~~(u/2));const h=new URL(`maps/${encodeURIComponent(a)}/static/${t.lng},${t.lat},${n}/${I}x${u}${l}.${S}`,N.maptilerApiURL);if("attribution"in e&&h.searchParams.set("attribution",e.attribution.toString()),"marker"in e){let m="";const g="markerIcon"in e;g&&(m+=`icon:${e.markerIcon}|`),g&&"markerAnchor"in e&&(m+=`anchor:${e.markerAnchor}|`),g&&e.hiDPI&&(m+="scale:2|");const O=Array.isArray(e.marker)?e.marker:[e.marker];m+=O.map(tt=>k(tt,!g)).join("|"),h.searchParams.set("markers",m)}if("path"in e){let m="";if(m+=`fill:${(c=e.pathFillColor)!=null?c:"none"}|`,"pathStrokeColor"in e&&(m+=`stroke:${e.pathStrokeColor}|`),"pathWidth"in e){const g=e.pathWidth/(e.hiDPI?2:1);m+=`width:${g.toString()}|`}m+=$(e.path),h.searchParams.set("path",m)}return h.searchParams.set("key",f.apiKey),h.toString()}function Q(t,n={}){var e,r,o,i,s;const c=(e=n.style)!=null?e:N.mapStyle,a=n.hiDPI?"@2x":"",l=(r=n.format)!=null?r:"png";let S=~~((o=n.width)!=null?o:1024),I=~~((i=n.height)!=null?i:1024);n.hiDPI&&(S=~~(S/2),I=~~(I/2));const u=new URL(`maps/${encodeURIComponent(c)}/static/${t.southWest.lng},${t.southWest.lat},${t.northEast.lng},${t.northEast.lat}/${S}x${I}${a}.${l}`,N.maptilerApiURL);if("attribution"in n&&u.searchParams.set("attribution",n.attribution.toString()),"padding"in n&&u.searchParams.set("padding",n.padding.toString()),"marker"in n){let h="";const m="markerIcon"in n;m&&(h+=`icon:${n.markerIcon}|`),m&&"markerAnchor"in n&&(h+=`anchor:${n.markerAnchor}|`),m&&n.hiDPI&&(h+="scale:2|");const g=Array.isArray(n.marker)?n.marker:[n.marker];h+=g.map(O=>k(O,!m)).join("|"),u.searchParams.set("markers",h)}if("path"in n){let h="";if(h+=`fill:${(s=n.pathFillColor)!=null?s:"none"}|`,"pathStrokeColor"in n&&(h+=`stroke:${n.pathStrokeColor}|`),"pathWidth"in n){const m=n.pathWidth/(n.hiDPI?2:1);h+=`width:${m.toString()}|`}h+=$(n.path),u.searchParams.set("path",h)}return u.searchParams.set("key",f.apiKey),u.toString()}function q(t={}){var n,e,r,o,i;if(!("marker"in t)&&!("path"in t))throw new Error("Automatic static maps require markers and/or path to be created.");const s=(n=t.style)!=null?n:N.mapStyle,c=t.hiDPI?"@2x":"",a=(e=t.format)!=null?e:"png";let l=~~((r=t.width)!=null?r:1024),S=~~((o=t.height)!=null?o:1024);t.hiDPI&&(l=~~(l/2),S=~~(S/2));const I=new URL(`maps/${encodeURIComponent(s)}/static/auto/${l}x${S}${c}.${a}`,N.maptilerApiURL);if("attribution"in t&&I.searchParams.set("attribution",t.attribution.toString()),"padding"in t&&I.searchParams.set("padding",t.padding.toString()),"marker"in t){let u="";const h="markerIcon"in t;h&&(u+=`icon:${t.markerIcon}|`),h&&"markerAnchor"in t&&(u+=`anchor:${t.markerAnchor}|`),h&&t.hiDPI&&(u+="scale:2|");const m=Array.isArray(t.marker)?t.marker:[t.marker];u+=m.map(g=>k(g,!h)).join("|"),I.searchParams.set("markers",u)}if("path"in t){let u="";if(u+=`fill:${(i=t.pathFillColor)!=null?i:"none"}|`,"pathStrokeColor"in t&&(u+=`stroke:${t.pathStrokeColor}|`),"pathWidth"in t){const h=t.pathWidth/(t.hiDPI?2:1);u+=`width:${h.toString()}|`}u+=$(t.path),I.searchParams.set("path",u)}return I.searchParams.set("key",f.apiKey),I.toString()}const X={centered:z,bounded:Q,automatic:q};p.Language=P,p.ServiceError=d,p.config=f,p.coordinates=W,p.data=V,p.geocoding=M,p.geolocation=x,p.staticMaps=X,Object.defineProperty(p,"__esModule",{value:!0})});
