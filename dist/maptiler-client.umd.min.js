(function(u,I){typeof exports=="object"&&typeof module<"u"?I(exports):typeof define=="function"&&define.amd?define(["exports"],I):(u=typeof globalThis<"u"?globalThis:u||self,I(u.maptilerClient={}))})(this,function(u){"use strict";function I(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class C{constructor(){this._apiKey="",this._fetch=I()}set apiKey(t){this._apiKey=t}get apiKey(){return this._apiKey}set fetch(t){this._fetch=t}get fetch(){return this._fetch}}const g=new C,L={AUTO:"auto",ALBANIAN:"sq",ARABIC:"ar",ARMENIAN:"hy",AZERBAIJANI:"az",BELORUSSIAN:"be",BOSNIAN:"bs",BRETON:"br",BULGARIAN:"bg",CATALAN:"ca",CHINESE:"zh",CROATIAN:"hr",CZECH:"cs",DANISH:"da",DUTCH:"nl",ENGLISH:"en",ESPERANTO:"eo",ESTONIAN:"et",FINNISH:"fi",FRENCH:"fr",FRISIAN:"fy",GEORGIAN:"ka",GERMAN:"de",GREEK:"el",HEBREW:"he",HUNGARIAN:"hu",ICELANDIC:"is",IRISH:"ga",ITALIAN:"it",JAPANESE:"ja",KANNADA:"kn",KAZAKH:"kk",KOREAN:"ko",ROMAN_LATIN:"la",LATVIAN:"lv",LITHUANIAN:"lt",LUXEMBOURGISH:"lb",MACEDONIAN:"mk",MALTESE:"mt",NORWEGIAN:"no",POLISH:"pl",PORTUGUESE:"pt",ROMANIAN:"ro",ROMANSH:"rm",RUSSIAN:"ru",SCOTTISH_GAELIC:"gd",SERBIAN_CYRILLIC:"sr",SLOVAK:"sk",SLOVENE:"sl",SPANISH:"es",SWEDISH:"sv",THAI:"th",TURKISH:"tr",UKRAINIAN:"uk",WELSH:"cy"},F=new Set(Object.values(L));function x(){if(typeof navigator>"u")return Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];const n=Array.from(new Set(navigator.languages.map(t=>t.split("-")[0]))).filter(t=>F.has(t));return n.length?n[0]:L.ENGLISH}var B=(n,t,e)=>new Promise((r,i)=>{var a=o=>{try{c(e.next(o))}catch(l){i(l)}},s=o=>{try{c(e.throw(o))}catch(l){i(l)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(a,s);c((e=e.apply(n,t)).next())});function S(n){return B(this,arguments,function*(t,e={}){if(g.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(t).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return g.fetch(t,e)})}const y={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(y);class A extends Error{constructor(t,e=""){super(`Call to enpoint ${t.url} failed with the status code ${t.status}. ${e}`),this.res=t}}var U=(n,t,e)=>new Promise((r,i)=>{var a=o=>{try{c(e.next(o))}catch(l){i(l)}},s=o=>{try{c(e.throw(o))}catch(l){i(l)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(a,s);c((e=e.apply(n,t)).next())});const D={400:"Query too long / Invalid parameters",403:"Key is missing, invalid or restricted"};function O(n,t){if(t.language==null)return;const e=Array.from(new Set((Array.isArray(t.language)?t.language:[t.language]).map(r=>r===L.AUTO?x():r))).join(",");n.set("language",e)}function K(n,t){var e;n.set("key",(e=t.apiKey)!=null?e:g.apiKey),t.limit!=null&&n.set("limit",String(t.limit)),t.types!=null&&n.set("types",t.types.join(",")),O(n,t)}function W(n){return U(this,arguments,function*(t,e={}){var r;if(typeof t!="string"||t.trim().length===0)throw new Error("The query must be a non-empty string");const i=new URL(`geocoding/${encodeURIComponent(t)}.json`,y.maptilerApiURL),{searchParams:a}=i;K(a,e),e.bbox!=null&&a.set("bbox",e.bbox.join(",")),e.proximity!=null&&a.set("proximity",e.proximity.join(",")),e.country!=null&&a.set("country",e.country.join(",")),e.fuzzyMatch!=null&&a.set("fuzzyMatch",e.fuzzyMatch?"true":"false"),e.autocomplete!=null&&a.set("autocomplete",e.autocomplete?"true":"false");const s=i.toString(),c=yield S(s);if(!c.ok)throw new A(c,(r=D[c.status])!=null?r:"");return yield c.json()})}function z(n){return U(this,arguments,function*(t,e={}){var r;if(!Array.isArray(t)||t.length<2)throw new Error("The position must be an array of form [lng, lat].");const i=new URL(`geocoding/${t[0]},${t[1]}.json`,y.maptilerApiURL);K(i.searchParams,e);const a=i.toString(),s=yield S(a);if(!s.ok)throw new A(s,(r=D[s.status])!=null?r:"");return yield s.json()})}function _(n){return U(this,arguments,function*(t,e={}){var r;const i=new URL(`geocoding/${t}.json`,y.maptilerApiURL);O(i.searchParams,e);const a=i.toString(),s=yield S(a);if(!s.ok)throw new A(s,(r=D[s.status])!=null?r:"");return yield s.json()})}const q={forward:W,reverse:z,byId:_,language:L};var Y=(n,t,e)=>new Promise((r,i)=>{var a=o=>{try{c(e.next(o))}catch(l){i(l)}},s=o=>{try{c(e.throw(o))}catch(l){i(l)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(a,s);c((e=e.apply(n,t)).next())});const j={403:"Key is missing, invalid or restricted"};function Z(){return Y(this,arguments,function*(n={}){var t;const e=new URL("geolocation/ip.json",y.maptilerApiURL);e.searchParams.set("key",(t=n.apiKey)!=null?t:g.apiKey);const r=e.toString(),i=yield S(r);if(!i.ok)throw new A(i,i.status in j?j[i.status]:"");return yield i.json()})}const J={info:Z};var H=(n,t,e)=>new Promise((r,i)=>{var a=o=>{try{c(e.next(o))}catch(l){i(l)}},s=o=>{try{c(e.throw(o))}catch(l){i(l)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(a,s);c((e=e.apply(n,t)).next())});const R={403:"Key is missing, invalid or restricted"};function Q(n){return H(this,arguments,function*(t,e={}){var r;if(typeof t!="string"||t.trim().length===0)throw new Error("The query must be a non-empty string");const i=new URL(`coordinates/search/${t}.json`,y.maptilerApiURL);i.searchParams.set("key",(r=e.apiKey)!=null?r:g.apiKey),"limit"in e&&i.searchParams.set("limit",e.limit.toString()),"transformations"in e&&i.searchParams.set("transformations",e.transformations.toString()),"exports"in e&&i.searchParams.set("exports",e.exports.toString());const a=i.toString(),s=yield S(a);if(!s.ok)throw new A(s,s.status in R?R[s.status]:"");return yield s.json()})}function X(n){return H(this,arguments,function*(t,e={}){var r;const i=(Array.isArray(t[0])?t:[t]).map(o=>`${o[0]},${o[1]}`).join(";"),a=new URL(`coordinates/transform/${i}.json`,y.maptilerApiURL);a.searchParams.set("key",(r=e.apiKey)!=null?r:g.apiKey),"sourceCrs"in e&&a.searchParams.set("s_srs",e.sourceCrs.toString()),"targetCrs"in e&&a.searchParams.set("t_srs",e.targetCrs.toString()),"operations"in e&&a.searchParams.set("ops",(Array.isArray(e.operations)?e.operations:[e.operations]).join("|"));const s=a.toString(),c=yield S(s);if(!c.ok)throw new A(c,c.status in R?R[c.status]:"");return yield c.json()})}const ee={search:Q,transform:X};var te=(n,t,e)=>new Promise((r,i)=>{var a=o=>{try{c(e.next(o))}catch(l){i(l)}},s=o=>{try{c(e.throw(o))}catch(l){i(l)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(a,s);c((e=e.apply(n,t)).next())});const V={403:"Key is missing, invalid or restricted"};function ne(n){return te(this,arguments,function*(t,e={}){var r;if(typeof t!="string"||t.trim().length===0)throw new Error("The data ID must be a non-empty string");const i=new URL(`data/${encodeURIComponent(t)}/features.json`,y.maptilerApiURL);i.searchParams.set("key",(r=e.apiKey)!=null?r:g.apiKey);const a=i.toString(),s=yield S(a);if(!s.ok)throw new A(s,s.status in V?V[s.status]:"");return yield s.json()})}const re={get:ne};function M(n){const t=/^maptiler:\/\/(.*)/;let e;const r=n.trim();let i;return r.startsWith("http://")||r.startsWith("https://")?i=r:(e=t.exec(r))!==null?i=`https://api.maptiler.com/maps/${e[1]}/style.json`:i=`https://api.maptiler.com/maps/${r}/style.json`,i}class k{constructor(t,e,r,i,a,s){this.name=t,this.variantType=e,this.id=r,this.referenceStyle=i,this.description=a,this.imageURL=s}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(t){return this.referenceStyle.hasVariant(t)}getVariant(t){return this.referenceStyle.getVariant(t)}getVariants(){return this.referenceStyle.getVariants().filter(t=>t!==this)}getImageURL(){return this.imageURL}getExpandedStyleURL(){return M(this.getId())}}class E{constructor(t,e){this.name=t,this.id=e,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(t){this.variants[t.getType()]=t,this.orderedVariants.push(t)}hasVariant(t){return t in this.variants}getVariant(t){return t in this.variants?this.variants[t]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0]}}const T=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Winter",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]}];function ie(n){return new Proxy(n,{get(t,e,r){return t.hasVariant(e)?t.getVariant(e):e.toString().toUpperCase()===e?n.getDefaultVariant():Reflect.get(t,e,r)}})}function ae(){const n={};for(let t=0;t<T.length;t+=1){const e=T[t],r=ie(new E(e.name,e.referenceStyleID));for(let i=0;i<e.variants.length;i+=1){const a=e.variants[i],s=new k(a.name,a.variantType,a.id,r,a.description,a.imageURL);r.addVariant(s)}n[e.referenceStyleID]=r}return n}function P(n){if(!n)return G[T[0].referenceStyleID].getDefaultVariant().getId();if(typeof n=="string"||n instanceof String)return n.trim().toLowerCase();if(n instanceof k)return n.getId();if(n instanceof E)return n.getDefaultVariant().getId()}const G=ae();function se(n,t,e){let r=t[0],i=t[1],a=e[0]-r,s=e[1]-i;if(a!==0||s!==0){const c=((n[0]-r)*a+(n[1]-i)*s)/(a*a+s*s);c>1?(r=e[0],i=e[1]):c>0&&(r+=a*c,i+=s*c)}return a=n[0]-r,s=n[1]-i,a*a+s*s}function $(n,t,e,r,i){let a=r,s;for(let c=t+1;c<e;c++){const o=se(n[c],n[t],n[e]);o>a&&(s=c,a=o)}a>r&&(s-t>1&&$(n,t,s,r,i),i.push(n[s]),e-s>1&&$(n,s,e,r,i))}function oe(n,t){const e=n.length-1,r=[n[0]];return $(n,0,e,t,r),r.push(n[e]),r}function ce(n,t){if(n.length<=2)return n;const e=t!==void 0?t*t:1;return oe(n,e)}function w(n,t=!0){let e=`${n[0]},${n[1]}`;return n.length===3&&t&&(e+=`,${n[2]}`),e}function N(n,t=3e3){let e=n.map(a=>a.join(",")).join("|"),r=5e-6;const i=1e-5;for(;e.length>t;)e=ce(n,r).map(a=>`${a[0]},${a[1]}`).join("|"),r+=i;return e}function le(n,t,e={}){var r,i,a,s,c;const o=P(e.style),l=e.hiDPI?"@2x":"",v=(r=e.format)!=null?r:"png";let d=~~((i=e.width)!=null?i:1024),m=~~((a=e.height)!=null?a:1024);e.hiDPI&&(d=~~(d/2),m=~~(m/2));const p=new URL(`maps/${encodeURIComponent(o)}/static/${n[0]},${n[1]},${t}/${d}x${m}${l}.${v}`,y.maptilerApiURL);if("attribution"in e&&p.searchParams.set("attribution",e.attribution.toString()),"markers"in e){let h="";const f="markerIcon"in e;f&&(h+=`icon:${e.markerIcon}|`),f&&"markerAnchor"in e&&(h+=`anchor:${e.markerAnchor}|`),f&&e.hiDPI&&(h+="scale:2|");const b=Array.isArray(e.markers[0])?e.markers:[e.markers];h+=b.map(ue=>w(ue,!f)).join("|"),p.searchParams.set("markers",h)}if("path"in e){let h="";if(h+=`fill:${(s=e.pathFillColor)!=null?s:"none"}|`,"pathStrokeColor"in e&&(h+=`stroke:${e.pathStrokeColor}|`),"pathWidth"in e){const f=e.pathWidth/(e.hiDPI?2:1);h+=`width:${f.toString()}|`}h+=N(e.path),p.searchParams.set("path",h)}return p.searchParams.set("key",(c=e.apiKey)!=null?c:g.apiKey),p.toString()}function pe(n,t={}){var e,r,i,a,s;const c=P(t.style),o=t.hiDPI?"@2x":"",l=(e=t.format)!=null?e:"png";let v=~~((r=t.width)!=null?r:1024),d=~~((i=t.height)!=null?i:1024);t.hiDPI&&(v=~~(v/2),d=~~(d/2));const m=new URL(`maps/${encodeURIComponent(c)}/static/${n[0]},${n[1]},${n[2]},${n[3]}/${v}x${d}${o}.${l}`,y.maptilerApiURL);if("attribution"in t&&m.searchParams.set("attribution",t.attribution.toString()),"padding"in t&&m.searchParams.set("padding",t.padding.toString()),"markers"in t){let p="";const h="markerIcon"in t;h&&(p+=`icon:${t.markerIcon}|`),h&&"markerAnchor"in t&&(p+=`anchor:${t.markerAnchor}|`),h&&t.hiDPI&&(p+="scale:2|");const f=Array.isArray(t.markers[0])?t.markers:[t.markers];p+=f.map(b=>w(b,!h)).join("|"),m.searchParams.set("markers",p)}if("path"in t){let p="";if(p+=`fill:${(a=t.pathFillColor)!=null?a:"none"}|`,"pathStrokeColor"in t&&(p+=`stroke:${t.pathStrokeColor}|`),"pathWidth"in t){const h=t.pathWidth/(t.hiDPI?2:1);p+=`width:${h.toString()}|`}p+=N(t.path),m.searchParams.set("path",p)}return m.searchParams.set("key",(s=t.apiKey)!=null?s:g.apiKey),m.toString()}function me(n={}){var t,e,r,i,a;if(!("markers"in n)&&!("path"in n))throw new Error("Automatic static maps require markers and/or path to be created.");const s=P(n.style),c=n.hiDPI?"@2x":"",o=(t=n.format)!=null?t:"png";let l=~~((e=n.width)!=null?e:1024),v=~~((r=n.height)!=null?r:1024);n.hiDPI&&(l=~~(l/2),v=~~(v/2));const d=new URL(`maps/${encodeURIComponent(s)}/static/auto/${l}x${v}${c}.${o}`,y.maptilerApiURL);if("attribution"in n&&d.searchParams.set("attribution",n.attribution.toString()),"padding"in n&&d.searchParams.set("padding",n.padding.toString()),"markers"in n){let m="";const p="markerIcon"in n;p&&(m+=`icon:${n.markerIcon}|`),p&&"markerAnchor"in n&&(m+=`anchor:${n.markerAnchor}|`),p&&n.hiDPI&&(m+="scale:2|");const h=Array.isArray(n.markers[0])?n.markers:[n.markers];m+=h.map(f=>w(f,!p)).join("|"),d.searchParams.set("markers",m)}if("path"in n){let m="";if(m+=`fill:${(i=n.pathFillColor)!=null?i:"none"}|`,"pathStrokeColor"in n&&(m+=`stroke:${n.pathStrokeColor}|`),"pathWidth"in n){const p=n.pathWidth/(n.hiDPI?2:1);m+=`width:${p.toString()}|`}m+=N(n.path),d.searchParams.set("path",m)}return d.searchParams.set("key",(a=n.apiKey)!=null?a:g.apiKey),d.toString()}const he={centered:le,bounded:pe,automatic:me};u.ClientConfig=C,u.LanguageGeocoding=L,u.MapStyle=G,u.MapStyleVariant=k,u.ReferenceMapStyle=E,u.ServiceError=A,u.config=g,u.coordinates=ee,u.data=re,u.expandMapStyle=M,u.geocoding=q,u.geolocation=J,u.mapStylePresetList=T,u.staticMaps=he,Object.defineProperty(u,"__esModule",{value:!0})});
